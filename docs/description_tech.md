# Описание технологии Telegram Clicker Bot
![ВИТРИНА ОПИСАНИЕ](https://github.com/user-attachments/assets/672b8432-b009-4369-9518-0c66151304b6)

## Введение
Этот документ предоставляет подробное описание технологии, использованной для создания Telegram-бота кликера — мини-игры, где пользователи зарабатывают виртуальные монеты, нажимая на кнопки, покупают улучшения, участвуют в азартной игре с кубиком и соревнуются в рейтинге. Документ включает в себя следующие сферы:

* **Исследование предметной области** — изучение Telegram Bot API и механик кликер-игр.
* **Архитектура** — структура системы и взаимодействие компонентов.
* **Процессы технологии** — этапы разработки, тестирования и оптимизации.


## Часть 1: Исследование предметной области и последовательность действий по созданию технологии

### 1.1 Исследование предметной области
Перед созданием бота было проведено исследование, чтобы понять, как работают Telegram-боты, какие библиотеки использовать и какие функции включить в игру. Основные этапы:
1. **Изучение Telegram Bot API:**
   * Telegram предоставляет API для создания ботов. Было изучено, как отправлять сообщения, обрабатывать команды, использовать клавиатуры (inline и reply) и управлять чатами.
   * Использована документация Telegram: https://core.telegram.org/bots/api.
2. **Анализ существующих кликер-игр:**
   * Изучены популярные кликер-игры, такие как Cookie Clicker и Telegram-боты вроде Notcoin.
   * Выделены ключевые механики: клики для заработка монет, улучшения (сила клика, автоклик), рейтинг игроков, азартные элементы.
3. **Выбор технологий:**
   * **Язык программирования:** Python, из-за простоты и наличия библиотек для Telegram.
   * **Библиотека:** python-telegram-bot (Telebot), так как она упрощает работу с Telegram API.
   * **Хранение данных:** JSON-файл для сохранения информации об - простое и надёжное решение для хранения профилей игроков.
   * **GUI:** PyQt5 для создания интерфейса управления ботом.
   * **Асинхронное программирование:** asyncio для обработки запросов бота.
4. **Определение функционала:**
   * Основные функции: клики для заработка монет, магазин улучшений, профиль игрока, рейтинг, игра на удачу (кубик).
   * Дополнительно: интерфейс для администрирования (Bot Manager) для управления игроками.
5. **Прототипирование:**
   * Создан прототип бота с минимальной функциональностью (команда _/start_, клик, сохранение данных).
   * Протестированы базовые механики и выявлены проблемы, такие как синхронизация данных и обработка ошибок.
  
### 1.2 Последовательность действий по созданию технологии
1. **Настройка окружения:**
   * Установлены Python, библиотеки (telebot, PyQt5, python-dotenv) и созданы файлы окружения (.env).
   * Зарегистрирован бот через BotFather в Telegram для получения токена.
2. **Разработка ядра бота:**
   * Реализована основная логика в tg_bot_practice.py: обработка команд, сохранение данных, автоклик, магазин, рейтинг, игра на удачу.
   * Добавлена обработка ошибок и отладочные сообщения.
3. **Создание интерфейса управления:**
   * Разработан GUI в bot_manager.py с использованием PyQt5.
   * Реализованы функции просмотра, редактирования и удаления данных игроков.
4. **Тестирование:**
   * Проведено тестирование бота в Telegram: проверены все команды, клавиатуры, обработка некорректных данных.
   * Тестирование GUI: проверка обновления таблицы, логирование, корректность изменений.
5. **Оптимизация:**
   * Улучшена производительность автоклика (оптимизация расчётов).
   * Добавлены проверки валидности данных перед сохранением.
   * Улучшен дизайн интерфейса GUI (тёмная тема, стилизация).
6. **Документирование:**
   * Составлена документация для пользователей и разработчиков.
   * Подготовлены иллюстрации и диаграммы для наглядности.

### 1.3 Требования к технологии 
На основе исследования были сформулированы требования:
   * **Простота использования:** Интуитивный интерфейс с кнопками.
   * **Надёжность:** Сохранение данных игроков и обработка ошибок.
   * **Администрирование:** Интерфейс для управления данными игроков.
   * **Масштабируемость:** Возможность добавления новых функций, установка на сервер для круглосуточной работы.

## Часть 2 - Архитектура системы
Архитектура бота состоит из двух основных компонентов:
1. **Telegram-бот:** Основная логика игры, взаимодействие с пользователями через Telegram.
2. **Bot Manager:** Графический интерфейс для администрирования.

### 2.1 Компоненты Telegram-бота
* **Входной слой:**
    * Обработка команд (/start, /click, /shop, /luck, /profile, /top).
    * Обработка текстовых сообщений и callback-запросов от inline-кнопок.
* **Бизнес-логика:**
    * Управление монетами: начисление за клики, автоклик, трата в магазине.
    * Игра на удачу: обработка ставок и генерация случайного числа.
    * Рейтинг: сортировка игроков по количеству монет.
* **Хранилище данных:**
    * JSON-файл (players.json) для хранения профилей игроков (ID, никнейм, монеты, сила клика, автоклик, общее количество кликов).
* **Выходной слой:**
    * Отправка текстовых сообщений, изображений (число выпавших игральных костей), клавиатур.

### 2.2 Компоненты Bot manager
* **Интерфейс:**
    * Таблица для отображения данных игроков (ID, никнейм, монеты, сила клика, автоклик, общее количество кликов, ранг).
    * Кнопки для запуска бота, обновления таблицы и удаления игроков.
    * Лог для отображения отладочных сообщений.
* **Интерфейс:**
    * Чтение и запись данных в players.json.
    * Редактирование данных игроков через таблицу.
    * Перенаправление вывода Python (stdout, stderr) в лог.

### 2.3 Взаимодействие компонентов
* **Бот ↔ JSON:** Бот читает и записывает данные игроков в players.json при каждом действии (клик, покупка, ставка).
* **Bot Manager ↔ JSON:** Bot Manager загружает данные из players.json для отображения и сохраняет изменения.
* **Пользователь ↔ Бот:** Пользователь отправляет команды через Telegram, бот отвечает сообщениями и клавиатурами.
* **Администратор ↔ Bot Manager:** Администратор управляет данными через GUI.

**Архитектура системы:**
![диаг 1](https://github.com/user-attachments/assets/8a2521f4-2a86-4aa5-89b7-fa03b0ef0611)

## Часть 3 - Процессы технологии
### 3.1 Этапы разработки
...
...
  
